<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RISK Menu</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    
    <style>
        :root {
            --bg-color: rgba(10, 10, 10, 0.92);
            --primary-text: #ffffff;
            --secondary-text: #b0b0b0;
            --accent-color: #8A2BE2;
            --highlight-bg: #8A2BE2;
            --border-color: rgba(255, 255, 255, 0.15);
            --font: 'Inter', sans-serif;
            --border-radius: 8px;
            --transition-speed: 0.1s;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font);
            background-color: transparent;
            color: var(--primary-text);
            overflow: hidden;
            user-select: none;
        }

        .hidden { display: none !important; }

        .menu-container {
            position: absolute;
            top: 15vh;
            left: 5vw;
            width: 420px;
            background: var(--bg-color);
            border-radius: var(--border-radius);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border-color);
            visibility: visible;
        }

        .header {
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-color);
            font-size: 24px;
            font-weight: 700;
            text-align: center;
            color: var(--accent-color);
        }

        .tabs-container {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            background: rgba(0,0,0,0.2);
        }

        .tab {
            flex: 1;
            padding: 12px 0;
            text-align: center;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background-color 0.2s ease;
            position: relative;
        }

        .tab.active {
            background: rgba(138, 43, 226, 0.2);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--accent-color);
        }

        .tab:hover {
            background: rgba(138, 43, 226, 0.1);
        }

        .menu-content {
            position: relative;
            height: 410px;
            overflow: hidden;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .menu-content::-webkit-scrollbar {
            display: none;
        }

        .tab-content {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
        }

        .tab-content.active {
            display: block;
        }

        .menu-items {
            list-style: none;
            position: relative;
        }

        .selection-highlight {
            position: absolute;
            left: 0;
            width: 100%;
            height: 41px;
            background: var(--highlight-bg);
            z-index: 1;
            transition: top var(--transition-speed) ease-out;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 11px 15px;
            font-size: 15px;
            position: relative;
            height: 41px;
            transition: background-color 0.2s ease;
            z-index: 2;
        }

        .menu-item:hover {
            background: rgba(138, 43, 226, 0.3) !important;
            cursor: pointer;
        }

        .item-content {
            display: flex;
            width: 100%;
            align-items: center;
            z-index: 2;
        }
        
        .item-label { flex-grow: 1; }
        .item-value { color: var(--primary-text); font-weight: 500; }
        
        .toggle-indicator { 
            font-weight: 600; 
            margin-left: 10px;
        }
        .toggle-indicator.on { color: #2ecc71; }
        .toggle-indicator.off { color: #ff4757; }

        .footer {
            padding: 10px 15px;
            background: rgba(0,0,0,0.3);
            border-top: 1px solid var(--border-color);
            min-height: 20px;
            font-size: 13px;
            color: var(--secondary-text);
            border-bottom-left-radius: var(--border-radius);
            border-bottom-right-radius: var(--border-radius);
        }

        #notification-container { 
            position: fixed; 
            bottom: 20px; 
            right: 20px; 
            z-index: 9999; 
            display: flex; 
            flex-direction: column; 
            gap: 10px; 
        }
        
        .notification { 
            background: var(--bg-color); 
            border: 1px solid var(--border-color); 
            color: var(--primary-text); 
            padding: 10px 20px; 
            border-radius: 8px; 
            border-left: 4px solid var(--accent-color); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); 
            opacity: 0; 
            animation: slideIn 0.3s forwards, slideOut 0.3s 2.7s forwards; 
        }
        
        @keyframes slideIn { 
            from { transform: translateX(100%); opacity: 0; } 
            to { transform: translateX(0); opacity: 1; } 
        }
        
        @keyframes slideOut { 
            from { transform: translateX(0); opacity: 1; } 
            to { transform: translateX(100%); opacity: 0; } 
        }
        
        .breadcrumb {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            background: rgba(0,0,0,0.3);
            font-size: 14px;
            font-weight: 500;
            border-bottom: 1px solid var(--border-color);
            color: var(--secondary-text);
        }
        
        .breadcrumb i {
            margin-right: 8px;
            cursor: pointer;
        }
        
        .breadcrumb i:hover {
            color: var(--accent-color);
        }
        
        .breadcrumb span {
            margin-left: 8px;
        }
    </style>
</head>
<body>

<div id="notification-container"></div>

<div class="menu-container" id="menu-container">
    <div class="header">RISK</div>
    
    <div class="breadcrumb" id="breadcrumb">
        <i class="fas fa-arrow-left" id="back-button"></i>
        <span id="current-tab">Player</span>
    </div>
    
    <div class="tabs-container" id="tabs-container">
        <!-- Tabs will be populated by JavaScript -->
    </div>
    
    <div class="menu-content" id="menu-content">
        <!-- Tab content will be populated by JavaScript -->
    </div>
    
    <div class="footer" id="footer">
        Player (1/8)
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const menuContainer = document.getElementById('menu-container');
        const tabsContainer = document.getElementById('tabs-container');
        const menuContent = document.getElementById('menu-content');
        const footer = document.getElementById('footer');
        const breadcrumb = document.getElementById('breadcrumb');
        const currentTabSpan = document.getElementById('current-tab');
        const backButton = document.getElementById('back-button');
        const notificationContainer = document.getElementById('notification-container');
        
        let selectedTabIndex = 0;
        let selectedItemIndex = 0;
        let currentSubmenu = null;
        let highlightEl = null;
        const ITEM_HEIGHT = 41;
        
        // Menu structure based on your screenshot
        const menuData = {
            tabs: [
                {
                    id: 'player',
                    title: 'Player',
                    items: [
                        { label: 'Online', type: 'submenu', target: 'online' },
                        { label: 'Teleport', type: 'submenu', target: 'teleport' },
                        { label: 'Emotes', type: 'submenu', target: 'emotes' },
                        { label: 'Weapons', type: 'submenu', target: 'weapons' },
                        { label: 'Vehicle', type: 'submenu', target: 'vehicle' },
                        { label: 'Events', type: 'submenu', target: 'events' },
                        { label: 'Settings', type: 'submenu', target: 'settings' },
                        { label: 'VIP', type: 'submenu', target: 'vip' },
                        { label: 'Beta - 1.0', type: 'submenu', target: 'beta' },
                        { label: 'Risk.lua', type: 'action', action: 'risk_lua' }
                    ]
                },
                {
                    id: 'triggers',
                    title: 'Triggers',
                    items: [
                        { label: 'Trigger 1', type: 'toggle', stateId: 'trigger1' },
                        { label: 'Trigger 2', type: 'toggle', stateId: 'trigger2' },
                        { label: 'Trigger 3', type: 'toggle', stateId: 'trigger3' },
                        { label: 'Trigger 4', type: 'toggle', stateId: 'trigger4' },
                        { label: 'Trigger 5', type: 'toggle', stateId: 'trigger5' }
                    ]
                },
                {
                    id: 'visuals',
                    title: 'Visuals',
                    items: [
                        { label: 'ESP', type: 'toggle', stateId: 'esp' },
                        { label: 'Crosshair', type: 'toggle', stateId: 'crosshair' },
                        { label: 'Radar', type: 'toggle', stateId: 'radar' },
                        { label: 'Night Vision', type: 'toggle', stateId: 'nightvision' }
                    ]
                },
                {
                    id: 'misc',
                    title: 'Misc',
                    items: [
                        { label: 'Option 1', type: 'toggle', stateId: 'misc1' },
                        { label: 'Option 2', type: 'toggle', stateId: 'misc2' },
                        { label: 'Option 3', type: 'toggle', stateId: 'misc3' }
                    ]
                }
            ],
            submenus: {
                'online': {
                    title: 'Online',
                    items: [
                        { label: 'Player List', type: 'submenu', target: 'player_list' },
                        { label: 'Server Info', type: 'action', action: 'server_info' },
                        { label: 'Join Game', type: 'action', action: 'join_game' }
                    ]
                },
                'teleport': {
                    title: 'Teleport',
                    items: [
                        { label: 'Waypoints', type: 'submenu', target: 'waypoints' },
                        { label: 'Custom Location', type: 'action', action: 'custom_location' },
                        { label: 'Last Location', type: 'action', action: 'last_location' }
                    ]
                },
                'emotes': {
                    title: 'Emotes',
                    items: [
                        { label: 'Dance 1', type: 'action', action: 'dance1' },
                        { label: 'Dance 2', type: 'action', action: 'dance2' },
                        { label: 'Wave', type: 'action', action: 'wave' },
                        { label: 'Sit', type: 'action', action: 'sit' }
                    ]
                },
                'weapons': {
                    title: 'Weapons',
                    items: [
                        { label: 'Give All Weapons', type: 'action', action: 'give_all' },
                        { label: 'Unlimited Ammo', type: 'toggle', stateId: 'unlimited_ammo' },
                        { label: 'No Recoil', type: 'toggle', stateId: 'no_recoil' }
                    ]
                },
                'vehicle': {
                    title: 'Vehicle',
                    items: [
                        { label: 'Spawn Vehicle', type: 'action', action: 'spawn_vehicle' },
                        { label: 'Repair Vehicle', type: 'action', action: 'repair_vehicle' },
                        { label: 'God Mode', type: 'toggle', stateId: 'vehicle_godmode' }
                    ]
                },
                'events': {
                    title: 'Events',
                    items: [
                        { label: 'Event 1', type: 'action', action: 'event1' },
                        { label: 'Event 2', type: 'action', action: 'event2' }
                    ]
                },
                'settings': {
                    title: 'Settings',
                    items: [
                        { label: 'Graphics', type: 'submenu', target: 'graphics' },
                        { label: 'Controls', type: 'submenu', target: 'controls' },
                        { label: 'Audio', type: 'submenu', target: 'audio' }
                    ]
                },
                'vip': {
                    title: 'VIP',
                    items: [
                        { label: 'VIP Features', type: 'submenu', target: 'vip_features' },
                        { label: 'VIP Status', type: 'action', action: 'vip_status' }
                    ]
                },
                'beta': {
                    title: 'Beta - 1.0',
                    items: [
                        { label: 'Experimental Feature 1', type: 'toggle', stateId: 'exp1' },
                        { label: 'Experimental Feature 2', type: 'toggle', stateId: 'exp2' }
                    ]
                }
            }
        };
        
        // Option states
        const optionStates = {};
        
        // Initialize the menu
        function initMenu() {
            createTabs();
            createTabContents();
            selectTab(0);
            setupEventListeners();
        }
        
        // Create tabs
        function createTabs() {
            tabsContainer.innerHTML = '';
            
            menuData.tabs.forEach((tab, index) => {
                const tabEl = document.createElement('div');
                tabEl.className = 'tab';
                tabEl.textContent = tab.title;
                tabEl.dataset.tabId = tab.id;
                tabEl.dataset.tabIndex = index;
                
                tabEl.addEventListener('click', () => {
                    selectTab(index);
                });
                
                tabsContainer.appendChild(tabEl);
            });
        }
        
        // Create tab contents
        function createTabContents() {
            menuContent.innerHTML = '';
            
            menuData.tabs.forEach((tab, index) => {
                const tabContent = document.createElement('div');
                tabContent.className = 'tab-content';
                tabContent.id = `tab-${tab.id}`;
                tabContent.dataset.tabIndex = index;
                
                const menuItems = document.createElement('ul');
                menuItems.className = 'menu-items';
                menuItems.id = `menu-items-${tab.id}`;
                
                const highlight = document.createElement('div');
                highlight.className = 'selection-highlight';
                highlight.id = `highlight-${tab.id}`;
                
                menuItems.appendChild(highlight);
                tabContent.appendChild(menuItems);
                menuContent.appendChild(tabContent);
                
                populateTabContent(tab.id);
            });
        }
        
        // Populate tab content with items
        function populateTabContent(tabId) {
            const tab = menuData.tabs.find(t => t.id === tabId);
            if (!tab) return;
            
            const menuItemsEl = document.getElementById(`menu-items-${tabId}`);
            if (!menuItemsEl) return;
            
            // Clear existing items (except the highlight)
            const highlight = document.getElementById(`highlight-${tabId}`);
            menuItemsEl.innerHTML = '';
            menuItemsEl.appendChild(highlight);
            
            // Add menu items
            tab.items.forEach((item, index) => {
                const menuItemEl = document.createElement('li');
                menuItemEl.className = 'menu-item';
                menuItemEl.dataset.itemIndex = index;
                
                let content = `<div class="item-content">`;
                content += `<span class="item-label">${item.label}</span>`;
                
                if (item.type === 'submenu') {
                    content += `<i class="fas fa-chevron-right"></i>`;
                } else if (item.type === 'toggle') {
                    const isOn = optionStates[item.stateId] || false;
                    content += `<span class="toggle-indicator ${isOn ? 'on' : 'off'}">${isOn ? 'ON' : 'OFF'}</span>`;
                }
                
                content += `</div>`;
                menuItemEl.innerHTML = content;
                
                menuItemEl.addEventListener('click', () => {
                    handleItemClick(tabId, index);
                });
                
                menuItemsEl.appendChild(menuItemEl);
            });
            
            // Update selection highlight for this tab
            updateSelection(tabId, 0);
        }
        
        // Select a tab
        function selectTab(index) {
            // Update tab selection
            const tabs = tabsContainer.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            tabs[index].classList.add('active');
            
            // Update tab content
            const tabContents = menuContent.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            tabContents[index].classList.add('active');
            
            selectedTabIndex = index;
            selectedItemIndex = 0;
            currentSubmenu = null;
            
            // Update breadcrumb
            currentTabSpan.textContent = menuData.tabs[index].title;
            backButton.style.visibility = 'hidden';
            
            // Update selection
            updateSelection(menuData.tabs[index].id, 0);
            
            // Update footer
            updateFooter();
        }
        
        // Handle item click
        function handleItemClick(tabId, itemIndex) {
            const tab = menuData.tabs.find(t => t.id === tabId);
            if (!tab || !tab.items[itemIndex]) return;
            
            const item = tab.items[itemIndex];
            
            if (item.type === 'submenu') {
                openSubmenu(item.target);
            } else if (item.type === 'toggle') {
                toggleOption(item.stateId);
                populateTabContent(tabId);
                updateSelection(tabId, itemIndex);
            } else if (item.type === 'action') {
                executeAction(item.action);
            }
        }
        
        // Open a submenu
        function openSubmenu(submenuId) {
            const submenu = menuData.submenus[submenuId];
            if (!submenu) return;
            
            currentSubmenu = submenu;
            
            // Update breadcrumb
            currentTabSpan.textContent = submenu.title;
            backButton.style.visibility = 'visible';
            
            // Populate the current tab with submenu items
            const currentTabId = menuData.tabs[selectedTabIndex].id;
            const menuItemsEl = document.getElementById(`menu-items-${currentTabId}`);
            const highlight = document.getElementById(`highlight-${currentTabId}`);
            
            menuItemsEl.innerHTML = '';
            menuItemsEl.appendChild(highlight);
            
            // Add submenu items
            submenu.items.forEach((item, index) => {
                const menuItemEl = document.createElement('li');
                menuItemEl.className = 'menu-item';
                menuItemEl.dataset.itemIndex = index;
                
                let content = `<div class="item-content">`;
                content += `<span class="item-label">${item.label}</span>`;
                
                if (item.type === 'submenu') {
                    content += `<i class="fas fa-chevron-right"></i>`;
                } else if (item.type === 'toggle') {
                    const isOn = optionStates[item.stateId] || false;
                    content += `<span class="toggle-indicator ${isOn ? 'on' : 'off'}">${isOn ? 'ON' : 'OFF'}</span>`;
                }
                
                content += `</div>`;
                menuItemEl.innerHTML = content;
                
                menuItemEl.addEventListener('click', () => {
                    handleSubmenuItemClick(submenuId, index);
                });
                
                menuItemsEl.appendChild(menuItemEl);
            });
            
            // Update selection
            selectedItemIndex = 0;
            updateSelection(currentTabId, 0);
            
            // Update footer
            updateFooter();
        }
        
        // Handle submenu item click
        function handleSubmenuItemClick(submenuId, itemIndex) {
            const submenu = menuData.submenus[submenuId];
            if (!submenu || !submenu.items[itemIndex]) return;
            
            const item = submenu.items[itemIndex];
            
            if (item.type === 'submenu') {
                openSubmenu(item.target);
            } else if (item.type === 'toggle') {
                toggleOption(item.stateId);
                
                // Re-render the submenu
                openSubmenu(submenuId);
                updateSelection(menuData.tabs[selectedTabIndex].id, itemIndex);
            } else if (item.type === 'action') {
                executeAction(item.action);
            }
        }
        
        // Go back to the main tab view
        function goBack() {
            if (currentSubmenu) {
                // If we're in a submenu, go back to the tab
                currentSubmenu = null;
                currentTabSpan.textContent = menuData.tabs[selectedTabIndex].title;
                backButton.style.visibility = 'hidden';
                
                // Repopulate the tab content
                populateTabContent(menuData.tabs[selectedTabIndex].id);
                updateSelection(menuData.tabs[selectedTabIndex].id, 0);
            } else {
                // If we're already at the tab level, cycle through tabs
                selectTab((selectedTabIndex - 1 + menuData.tabs.length) % menuData.tabs.length);
            }
            
            updateFooter();
        }
        
        // Toggle an option
        function toggleOption(stateId) {
            optionStates[stateId] = !optionStates[stateId];
            showNotification(`${stateId} ${optionStates[stateId] ? 'enabled' : 'disabled'}`);
        }
        
        // Execute an action
        function executeAction(action) {
            showNotification(`Executing: ${action}`);
            // In a real implementation, this would communicate with the Lua backend
        }
        
        // Update selection highlight
        function updateSelection(tabId, itemIndex) {
            const menuItemsEl = document.getElementById(`menu-items-${tabId}`);
            if (!menuItemsEl) return;
            
            const items = menuItemsEl.querySelectorAll('.menu-item');
            const highlight = document.getElementById(`highlight-${tabId}`);
            
            if (!items[itemIndex] || !highlight) return;
            
            // Update selected item styling
            items.forEach((item, i) => {
                item.classList.toggle('selected', i === itemIndex);
            });
            
            // Update highlight position
            const itemTop = itemIndex * ITEM_HEIGHT;
            highlight.style.top = `${itemTop}px`;
            
            selectedItemIndex = itemIndex;
        }
        
        // Update footer
        function updateFooter() {
            if (currentSubmenu) {
                footer.textContent = `${currentSubmenu.title} - Item ${selectedItemIndex + 1}/${currentSubmenu.items.length}`;
            } else {
                const tab = menuData.tabs[selectedTabIndex];
                footer.textContent = `${tab.title} - Item ${selectedItemIndex + 1}/${tab.items.length}`;
            }
        }
        
        // Show notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            notificationContainer.appendChild(notification);
            setTimeout(() => { notification.remove(); }, 3000);
        }
        
        // Set up event listeners
        function setupEventListeners() {
            // Back button
            backButton.addEventListener('click', goBack);
            
            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                switch(e.key) {
                    case 'ArrowUp':
                        e.preventDefault();
                        navigateUp();
                        break;
                    case 'ArrowDown':
                        e.preventDefault();
                        navigateDown();
                        break;
                    case 'ArrowLeft':
                        e.preventDefault();
                        navigateLeft();
                        break;
                    case 'ArrowRight':
                        e.preventDefault();
                        navigateRight();
                        break;
                    case 'Enter':
                        e.preventDefault();
                        selectItem();
                        break;
                    case 'Backspace':
                        e.preventDefault();
                        goBack();
                        break;
                }
            });
        }
        
        // Navigation functions
        function navigateUp() {
            let itemCount;
            
            if (currentSubmenu) {
                itemCount = currentSubmenu.items.length;
            } else {
                itemCount = menuData.tabs[selectedTabIndex].items.length;
            }
            
            selectedItemIndex = (selectedItemIndex - 1 + itemCount) % itemCount;
            updateSelection(menuData.tabs[selectedTabIndex].id, selectedItemIndex);
            updateFooter();
        }
        
        function navigateDown() {
            let itemCount;
            
            if (currentSubmenu) {
                itemCount = currentSubmenu.items.length;
            } else {
                itemCount = menuData.tabs[selectedTabIndex].items.length;
            }
            
            selectedItemIndex = (selectedItemIndex + 1) % itemCount;
            updateSelection(menuData.tabs[selectedTabIndex].id, selectedItemIndex);
            updateFooter();
        }
        
        function navigateLeft() {
            if (!currentSubmenu) {
                selectTab((selectedTabIndex - 1 + menuData.tabs.length) % menuData.tabs.length);
            }
        }
        
        function navigateRight() {
            if (!currentSubmenu) {
                selectTab((selectedTabIndex + 1) % menuData.tabs.length);
            }
        }
        
        function selectItem() {
            if (currentSubmenu) {
                handleSubmenuItemClick(currentSubmenu.id, selectedItemIndex);
            } else {
                handleItemClick(menuData.tabs[selectedTabIndex].id, selectedItemIndex);
            }
        }
        
        // Initialize the menu
        initMenu();
    });
</script>

</body>
</html>
